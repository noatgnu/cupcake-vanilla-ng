<div class="modal-header">
  <h4 class="modal-title">
    <i class="bi bi-check-circle me-2 text-success"></i>
    Validate Metadata Table
  </h4>
  <button 
    type="button" 
    class="btn-close" 
    aria-label="Close"
    (click)="activeModal.dismiss()"
    [disabled]="isValidating()">
  </button>
</div>

<form [formGroup]="validationForm" (ngSubmit)="onSubmit()">
  <div class="modal-body">
    <div class="alert alert-info">
      <i class="bi bi-info-circle me-2"></i>
      <strong>{{ config?.metadata_table_name }}</strong> will be validated against SDRF format standards using SDRFDataFrame.
    </div>

    <div class="row">
      <div class="col-md-6">
        <h6 class="mb-3">Validation Options</h6>
        
        <div class="form-check mb-3">
          <input 
            class="form-check-input" 
            type="checkbox" 
            id="validate_sdrf_format"
            formControlName="validate_sdrf_format">
          <label class="form-check-label" for="validate_sdrf_format">
            <i class="bi bi-file-earmark-text me-1 text-warning"></i>
            SDRF Format Validation
          </label>
          <small class="form-text text-muted d-block">
            Validate against MAGE-TAB SDRF standard format using SDRFDataFrame
          </small>
        </div>
      </div>

      <div class="col-md-6">
        <h6 class="mb-3">What gets checked?</h6>
        
        <div class="validation-info">
          <div class="mb-2">
            <i class="bi bi-check-circle text-success me-2"></i>
            Required SDRF columns presence
          </div>
          <div class="mb-2">
            <i class="bi bi-check-circle text-success me-2"></i>
            SDRF format compliance
          </div>
          <div class="mb-2">
            <i class="bi bi-check-circle text-success me-2"></i>
            Column header validation
          </div>
          <div class="mb-2">
            <i class="bi bi-check-circle text-success me-2"></i>
            Data structure integrity
          </div>
        </div>
      </div>
    </div>

    @if (validationError()) {
      <div class="alert alert-danger mt-3">
        <i class="bi bi-exclamation-triangle me-2"></i>
        {{ validationError() }}
      </div>
    }
  </div>

  <div class="modal-footer">
    <button 
      type="button" 
      class="btn btn-secondary"
      (click)="activeModal.dismiss()"
      [disabled]="isValidating()">
      Cancel
    </button>
    
    <button 
      type="submit" 
      class="btn btn-success"
      [disabled]="validationForm.invalid || isValidating()">
      @if (isValidating()) {
        <span class="spinner-border spinner-border-sm me-2" role="status"></span>
        Starting Validation...
      } @else {
        <i class="bi bi-play me-2"></i>
        Start Validation
      }
    </button>
  </div>
</form>