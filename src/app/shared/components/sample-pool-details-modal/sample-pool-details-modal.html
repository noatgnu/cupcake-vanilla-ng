<div class="modal-header">
  <h4 class="modal-title">
    <i class="bi bi-collection me-2"></i>{{ title }}
  </h4>
  <button type="button" class="btn-close" (click)="onClose()"></button>
</div>

<div class="modal-body">
  @if (pool) {
    <!-- Pool Type and Basic Info -->
    <div class="mb-4">
      <div class="d-flex justify-content-between align-items-start mb-3">
        <div>
          <h5 class="mb-2">{{ pool.pool_name }}</h5>
          <span [class]="poolTypeClass">
            <i class="bi bi-collection me-1"></i>{{ poolTypeLabel }}
          </span>
        </div>
        <div class="text-end">
          <small class="text-muted d-block">Pool ID: {{ pool.id }}</small>
          <small class="text-muted">Total Samples: {{ allSamplesCount }}</small>
        </div>
      </div>
      
      @if (pool.pool_description) {
        <div class="mt-3">
          <strong>Description:</strong>
          <p class="mt-1 mb-0">{{ pool.pool_description }}</p>
        </div>
      }
    </div>

    <!-- Sample Configuration -->
    <div class="mb-4">
      <h6 class="text-muted mb-3">
        <i class="bi bi-diagram-3 me-2"></i>Sample Configuration
      </h6>
      
      <div class="row">
        <!-- Pooled Only Samples -->
        <div class="col-md-6 mb-3">
          <div class="card h-100">
            <div class="card-body">
              <h6 class="card-title">
                <i class="bi bi-collection text-primary me-2"></i>Pooled Only Samples
              </h6>
              <p class="card-text">
                <small class="text-muted">{{ pool.pooled_only_samples.length || 0 }} samples</small>
              </p>
              <div class="sample-list">
                @if (pool.pooled_only_samples && pool.pooled_only_samples.length > 0) {
                  <div class="sample-numbers">{{ pooledOnlySamplesText }}</div>
                } @else {
                  <em class="text-muted">No pooled-only samples</em>
                }
              </div>
            </div>
          </div>
        </div>

        <!-- Pooled and Independent Samples -->
        <div class="col-md-6 mb-3">
          <div class="card h-100">
            <div class="card-body">
              <h6 class="card-title">
                <i class="bi bi-diagram-2 text-success me-2"></i>Pooled & Independent Samples
              </h6>
              <p class="card-text">
                <small class="text-muted">{{ pool.pooled_and_independent_samples.length || 0 }} samples</small>
              </p>
              <div class="sample-list">
                @if (pool.pooled_and_independent_samples && pool.pooled_and_independent_samples.length > 0) {
                  <div class="sample-numbers">{{ pooledAndIndependentSamplesText }}</div>
                } @else {
                  <em class="text-muted">No pooled & independent samples</em>
                }
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Template Sample -->
      @if (pool.template_sample) {
        <div class="mt-3">
          <div class="alert alert-info">
            <i class="bi bi-star me-2"></i>
            <strong>Template Sample:</strong> Sample {{ pool.template_sample }}
            <small class="d-block mt-1">This sample serves as the template for metadata structure.</small>
          </div>
        </div>
      }
    </div>

    <!-- Metadata Columns -->
    @if (pool.metadata_columns && pool.metadata_columns.length > 0) {
      <div class="mb-4">
        <h6 class="text-muted mb-3">
          <i class="bi bi-table me-2"></i>Metadata Columns ({{ pool.metadata_columns.length }})
        </h6>
        <div class="table-responsive">
          <table class="table table-sm">
            <thead>
              <tr>
                <th>Column Name</th>
                <th>Type</th>
                <th>Value</th>
                <th>Ontology</th>
              </tr>
            </thead>
            <tbody>
              @for (column of pool.metadata_columns; track column.id) {
                <tr>
                  <td>
                    <strong>{{ column.name }}</strong>
                  </td>
                  <td>
                    <span class="badge bg-light text-dark">{{ column.type }}</span>
                  </td>
                  <td>
                    @if (column.value) {
                      <code>{{ column.value }}</code>
                    } @else {
                      <em class="text-muted">No default value</em>
                    }
                  </td>
                  <td>
                    @if (column.ontology_type) {
                      <span class="badge bg-info">{{ column.ontology_type }}</span>
                    } @else {
                      <em class="text-muted">None</em>
                    }
                  </td>
                </tr>
              }
            </tbody>
          </table>
        </div>
      </div>
    }

    <!-- Timestamps -->
    <div class="mt-4">
      <div class="row">
        <div class="col-md-6">
          <small class="text-muted">
            <i class="bi bi-calendar-plus me-1"></i>
            Created: {{ pool.created_at | date:'MMM d, y, h:mm a' }}
          </small>
        </div>
        <div class="col-md-6">
          <small class="text-muted">
            <i class="bi bi-calendar-check me-1"></i>
            Updated: {{ pool.updated_at | date:'MMM d, y, h:mm a' }}
          </small>
        </div>
      </div>
    </div>

  } @else {
    <div class="text-center py-4">
      <i class="bi bi-exclamation-triangle text-warning display-4"></i>
      <h5 class="mt-3 text-muted">No Pool Data Available</h5>
      <p class="text-muted">Pool information could not be loaded.</p>
    </div>
  }
</div>

<div class="modal-footer">
  <button type="button" class="btn btn-secondary" (click)="onClose()">
    <i class="bi bi-x-circle me-1"></i>Close
  </button>
</div>