<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Cupcake Vanilla - First Run Wizard</title>
  <link href="first-run-wizard.css" rel="stylesheet">
</head>
<body>
  <div class="wizard-container">
    <!-- Progress Indicator -->
    <div class="wizard-progress">
      <div class="progress-bar">
        <div class="progress-fill" id="progressFill"></div>
      </div>
      <div class="progress-steps">
        <div class="step active" data-step="1">
          <div class="step-number">1</div>
          <div class="step-label">Welcome</div>
        </div>
        <div class="step" data-step="2">
          <div class="step-number">2</div>
          <div class="step-label">Installation Type</div>
        </div>
        <div class="step" data-step="3">
          <div class="step-number">3</div>
          <div class="step-label">Download</div>
        </div>
        <div class="step" data-step="4">
          <div class="step-number">4</div>
          <div class="step-label">Configure</div>
        </div>
        <div class="step" data-step="5">
          <div class="step-number">5</div>
          <div class="step-label">Install</div>
        </div>
        <div class="step" data-step="6">
          <div class="step-number">6</div>
          <div class="step-label">Setup</div>
        </div>
        <div class="step" data-step="7">
          <div class="step-number">7</div>
          <div class="step-label">Complete</div>
        </div>
      </div>
    </div>

    <!-- Wizard Content -->
    <div class="wizard-content">
      <!-- Step 1: Welcome -->
      <div class="wizard-step active" id="step1">
        <div class="step-header">
          <h1>Welcome to Cupcake Vanilla</h1>
          <p class="subtitle">Scientific Metadata Management Made Easy</p>
        </div>
        <div class="step-body">
          <div class="welcome-content">
            <p>This wizard will guide you through the installation and setup process.</p>
            <ul class="feature-list">
              <li>Download and configure the backend server</li>
              <li>Set up Python environment</li>
              <li>Initialize database and services</li>
              <li>Load metadata schemas and templates</li>
            </ul>
            <p class="estimate">Estimated time: 5-15 minutes depending on your choices</p>
          </div>
        </div>
      </div>

      <!-- Step 2: Installation Type -->
      <div class="wizard-step" id="step2">
        <div class="step-header">
          <h2>Choose Installation Type</h2>
          <p class="subtitle">Select how you want to install Cupcake Vanilla</p>
        </div>
        <div class="step-body">
          <div class="installation-options">
            <label class="installation-option">
              <input type="radio" name="installationType" value="portable" checked>
              <div class="option-card">
                <div class="option-icon">üöÄ</div>
                <h3>Quick Install (Recommended)</h3>
                <p>Download portable backend with bundled Python environment</p>
                <ul class="option-features">
                  <li>Everything pre-configured</li>
                  <li>No Python installation required</li>
                  <li>Fastest setup</li>
                </ul>
                <span class="option-badge recommended">Recommended</span>
              </div>
            </label>
            <label class="installation-option">
              <input type="radio" name="installationType" value="source">
              <div class="option-card">
                <div class="option-icon">‚öôÔ∏è</div>
                <h3>Custom Install</h3>
                <p>Use your own Python installation</p>
                <ul class="option-features">
                  <li>More control over configuration</li>
                  <li>Use existing Python 3.11+</li>
                  <li>Requires manual setup</li>
                </ul>
                <span class="option-badge">Advanced</span>
              </div>
            </label>
          </div>
        </div>
      </div>

      <!-- Step 3: Backend Download (placeholder - content loaded dynamically) -->
      <div class="wizard-step" id="step3">
        <div class="step-header">
          <h2>Download Backend</h2>
          <p class="subtitle" id="step3Subtitle">Downloading required files...</p>
        </div>
        <div class="step-body" id="step3Body">
          <!-- Content loaded by DownloaderManager -->
        </div>
      </div>

      <!-- Step 4: Python/Environment Setup (for source install only) -->
      <div class="wizard-step" id="step4">
        <div class="step-header">
          <h2>Python Environment</h2>
          <p class="subtitle">Configure Python environment</p>
        </div>
        <div class="step-body" id="step4Body">
          <!-- Content loaded dynamically based on installation type -->
        </div>
      </div>

      <!-- Step 5: Installation Progress -->
      <div class="wizard-step" id="step5">
        <div class="step-header">
          <h2>Installing Cupcake Vanilla</h2>
          <p class="subtitle">Please wait while we set up your installation...</p>
        </div>
        <div class="step-body">
          <div class="installation-progress">
            <div class="progress-tasks">
              <div class="task-item" id="task-venv">
                <div class="task-icon pending">‚óØ</div>
                <div class="task-info">
                  <div class="task-name">Setting up Python environment</div>
                  <div class="task-status">Pending...</div>
                </div>
              </div>
              <div class="task-item" id="task-dependencies">
                <div class="task-icon pending">‚óØ</div>
                <div class="task-info">
                  <div class="task-name">Installing dependencies</div>
                  <div class="task-status">Pending...</div>
                </div>
              </div>
              <div class="task-item" id="task-migrations">
                <div class="task-icon pending">‚óØ</div>
                <div class="task-info">
                  <div class="task-name">Running database migrations</div>
                  <div class="task-status">Pending...</div>
                </div>
              </div>
              <div class="task-item" id="task-static">
                <div class="task-icon pending">‚óØ</div>
                <div class="task-info">
                  <div class="task-name">Collecting static files</div>
                  <div class="task-status">Pending...</div>
                </div>
              </div>
              <div class="task-item" id="task-redis">
                <div class="task-icon pending">‚óØ</div>
                <div class="task-info">
                  <div class="task-name">Starting Redis server</div>
                  <div class="task-status">Pending...</div>
                </div>
              </div>
              <div class="task-item" id="task-services">
                <div class="task-icon pending">‚óØ</div>
                <div class="task-info">
                  <div class="task-name">Starting backend services</div>
                  <div class="task-status">Pending...</div>
                </div>
              </div>
            </div>
            <div class="log-section">
              <button class="log-toggle" id="logToggle">Show Detailed Logs</button>
              <div class="log-output hidden" id="logOutput"></div>
            </div>
          </div>
        </div>
      </div>

      <!-- Step 6: Superuser & Database Setup -->
      <div class="wizard-step" id="step6">
        <div class="step-header">
          <h2>Initial Setup</h2>
          <p class="subtitle">Create admin account and populate database</p>
        </div>
        <div class="step-body" id="step6Body">
          <!-- Content loaded dynamically - superuser form and database commands -->
        </div>
      </div>

      <!-- Step 7: Complete -->
      <div class="wizard-step" id="step7">
        <div class="step-header">
          <h1>üéâ Installation Complete!</h1>
          <p class="subtitle">Cupcake Vanilla is ready to use</p>
        </div>
        <div class="step-body">
          <div class="completion-content">
            <div class="completion-summary">
              <h3>What's Next?</h3>
              <ul class="next-steps">
                <li>Access the admin panel at <code>http://localhost:8000/admin</code></li>
                <li>Use the management panel (tray icon) to control services</li>
                <li>Create your first metadata project</li>
              </ul>
            </div>
            <div class="completion-options">
              <label class="checkbox-option">
                <input type="checkbox" id="launchNow" checked>
                <span>Launch Cupcake Vanilla now</span>
              </label>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Navigation -->
    <div class="wizard-navigation">
      <button class="btn btn-secondary" id="backBtn">Back</button>
      <div class="nav-spacer"></div>
      <button class="btn btn-secondary" id="cancelBtn">Cancel</button>
      <button class="btn btn-primary" id="nextBtn">Next</button>
    </div>
  </div>

  <script src="first-run-wizard-renderer.js"></script>
</body>
</html>
